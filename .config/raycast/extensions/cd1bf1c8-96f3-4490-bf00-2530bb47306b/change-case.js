"use strict";var M=Object.defineProperty;var Le=Object.getOwnPropertyDescriptor;var Pe=Object.getOwnPropertyNames;var Re=Object.prototype.hasOwnProperty;var be=(t,e)=>{for(var s in e)M(t,s,{get:e[s],enumerable:!0})},Ee=(t,e,s,a)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Pe(e))!Re.call(t,o)&&o!==s&&M(t,o,{get:()=>e[o],enumerable:!(a=Le(e,o))||a.enumerable});return t};var Fe=t=>Ee(M({},"__esModule",{value:!0}),t);var Qe={};be(Qe,{default:()=>ye});module.exports=Fe(Qe);var n=require("@raycast/api"),f=require("react");var ke=new RegExp("([\\p{Ll}\\d])(\\p{Lu})","gu"),_e=new RegExp("(\\p{Lu})([\\p{Lu}][\\p{Ll}])","gu"),Ue=new RegExp("(\\d)\\p{Ll}|(\\p{L})\\d","u"),ve=/[^\p{L}\d]+/giu,W="$1\0$2",H="";function J(t){let e=t.trim();e=e.replace(ke,W).replace(_e,W),e=e.replace(ve,"\0");let s=0,a=e.length;for(;e.charAt(s)==="\0";)s++;if(s===a)return[];for(;e.charAt(a-1)==="\0";)a--;return e.slice(s,a).split(/\0/g)}function Ie(t){let e=J(t);for(let s=0;s<e.length;s++){let a=e[s],o=Ue.exec(a);if(o){let i=o.index+(o[1]??o[2]).length;e.splice(s,1,a.slice(0,i),a.slice(i))}}return e}function w(t,e){let[s,a,o]=b(t,e);return s+a.map(I(e?.locale)).join(e?.delimiter??" ")+o}function K(t,e){let[s,a,o]=b(t,e),i=I(e?.locale),p=N(e?.locale),m=e?.mergeAmbiguousCharacters?j(i,p):Z(i,p);return s+a.map((d,h)=>h===0?i(d):m(d,h)).join(e?.delimiter??"")+o}function B(t,e){let[s,a,o]=b(t,e),i=I(e?.locale),p=N(e?.locale),m=e?.mergeAmbiguousCharacters?j(i,p):Z(i,p);return s+a.map(m).join(e?.delimiter??"")+o}function V(t,e){return U(t,{delimiter:"_",...e})}function U(t,e){let[s,a,o]=b(t,e),i=I(e?.locale),p=N(e?.locale);return s+a.map(j(i,p)).join(e?.delimiter??" ")+o}function G(t,e){let[s,a,o]=b(t,e);return s+a.map(N(e?.locale)).join(e?.delimiter??"_")+o}function Q(t,e){return w(t,{delimiter:".",...e})}function v(t,e){return w(t,{delimiter:"-",...e})}function q(t,e){return w(t,{delimiter:"/",...e})}function Y(t,e){return w(t,{delimiter:"_",...e})}function z(t,e){return U(t,{delimiter:"-",...e})}function I(t){return t===!1?e=>e.toLowerCase():e=>e.toLocaleLowerCase(t)}function N(t){return t===!1?e=>e.toUpperCase():e=>e.toLocaleUpperCase(t)}function j(t,e){return s=>`${e(s[0])}${t(s.slice(1))}`}function Z(t,e){return(s,a)=>{let o=s[0];return(a>0&&o>="0"&&o<="9"?"_"+o:e(o))+t(s.slice(1))}}function b(t,e={}){let s=e.split??(e.separateNumbers?Ie:J),a=e.prefixCharacters??H,o=e.suffixCharacters??H,i=0,p=t.length;for(;i<t.length;){let m=t.charAt(i);if(!a.includes(m))break;i++}for(;p>i;){let m=p-1,d=t.charAt(m);if(!o.includes(d))break;p=m}return[t.slice(0,i),s(t.slice(i,p)),t.slice(p)]}var E=require("@raycast/api");var Ne=/(\S+)|(.)/g,Oe=/[\.#][\p{L}\p{N}]/u,Me=new RegExp("\\p{Ll}(?=[\\p{Lu}])","u"),je=/[\p{L}\p{N}]+/gu,$e=new RegExp("^([^\\p{L}])*(?:\\p{L}\\.){2,}([^\\p{L}])*$","u"),De=new Set(["\u2014","\u2013","-","\u2015","/"]),ne=new Set([".","!","?"]),Xe=new Set([...ne,":",'"',"'","\u201D"]),$=new Set(["a","an","and","as","at","because","but","by","en","for","if","in","neither","nor","of","on","only","or","over","per","so","some","than","that","the","to","up","upon","v","versus","via","vs","when","with","without","yet"]);function se(t,e={}){let{locale:s=void 0,sentenceCase:a=!1,sentenceTerminators:o=ne,titleTerminators:i=Xe,smallWords:p=$,wordSeparators:m=De}=typeof e=="string"||Array.isArray(e)?{locale:e}:e,d=a?o:i,h="",u=!0;for(let P of t.matchAll(Ne)){let{1:l,2:A,index:k=0}=P;if(A){h+=A;continue}if(Oe.test(l)){let x=l.match($e);if(x){let[g,T="",S=""]=x;h+=a&&!u?l:te(l,T.length,s),u=d.has(S.charAt(0));continue}h+=l,u=d.has(l.charAt(l.length-1))}else{let x=Array.from(l.matchAll(je)),g=l,T=!1;for(let S=0;S<x.length;S++){let{0:y,index:r=0}=x[S],C=l.charAt(r+y.length);if(T=d.has(C),u)u=!1;else{if(a||Me.test(y))continue;if(x.length===1){if(p.has(y)&&!(k+l.length===t.length)&&!T)continue}else if(S>0&&(!m.has(l.charAt(r-1))||p.has(y)&&m.has(C)))continue}g=te(g,r,s)}h+=g,u=T||d.has(l.charAt(l.length-1))}}return h}function te(t,e,s){return t.slice(0,e)+t.charAt(e).toLocaleUpperCase(s)+t.slice(e+1)}function re(t,e){let s="";for(let a of t){let o=a.toLocaleLowerCase(e);s+=a===o?a.toLocaleUpperCase(e):o}return s}var D=new RegExp("\\p{L}","u"),ae=t=>D.test(t),oe=t=>{let e=0;return t.split("").map(s=>ae(s)?(e++,e%2===1?s.toUpperCase():s.toLowerCase()):s).join("")};var ce=t=>t.split("").map(e=>ae(e)?Math.random()>.5?e.toUpperCase():e.toLowerCase():e).join(""),ie=t=>re(t),le=(t,e)=>(0,E.getPreferenceValues)().preservePunctuation?t.toLowerCase():w(t,e).toLowerCase(),Ce=t=>{let e=t.search(D);return e===-1?t.toLowerCase():t.slice(0,e)+t[e].toLowerCase()+t.slice(e+1)},pe=(t,e)=>(0,E.getPreferenceValues)().preservePunctuation?t.replace(/(^|[\s\-_])(\w)/g,(a,o,i)=>o+i.toUpperCase()):U(t,e),ue=(t,e)=>v(t,e).toUpperCase(),fe=(t,e)=>{let s=(0,E.getPreferenceValues)().exceptions.split(",").map(o=>o.trim())??[],a=new Set([...s,...$]);return se(t,{sentenceCase:e,smallWords:a})},de=t=>fe(t,!0),me=t=>fe(t,!1),he=(t,e)=>(0,E.getPreferenceValues)().preservePunctuation?t.toUpperCase():w(t,e).toUpperCase(),xe=t=>{let e=t.search(D);return e===-1?t.toUpperCase():t.slice(0,e)+t[e].toUpperCase()+t.slice(e+1)};var ge=require("@raycast/api"),R={"Camel Case":K,"Capital Case":pe,"Constant Case":G,"Dot Case":Q,"Header Case":z,"Lower Case":le,"Lower First":Ce,"No Case":w,"Kebab Case":v,"Kebab Upper Case":ue,"Pascal Case":B,"Pascal Snake Case":V,"Path Case":q,"Random Case":ce,"Sentence Case":de,"Snake Case":Y,"Alternating Case":oe,"Swap Case":ie,"Title Case":me,"Upper Case":he,"Upper First":xe},rt=Object.keys(R),Se={"Header Case":["train","dash"],"No Case":["none"],"Kebab Case":["dash","slug","param"],"Random Case":["random"],"Swap Case":["reverse"],"Alternating Case":["alternating","sponge"],"Constant Case":["macro"]};function We(t,e){return e?t:t.toLowerCase()}function X(t,e){let s=(0,ge.getPreferenceValues)();return R[e](We(t,s.preserveCase),{prefixCharacters:s.prefixCharacters,suffixCharacters:s.suffixCharacters})}function we(t,e){let s=[],a=[],o=t.split(`
`);for(let i of o){let p=X(i,e);s.push(p),a.push((p.length===0?"\u200B":p)+`
`)}return{rawText:s.join(`
`),markdown:a.join(`
`)}}var c=require("react/jsx-runtime"),He=4,F=class t extends Error{constructor(){super("No text"),Object.setPrototypeOf(this,t.prototype)}};async function Je(){try{return await(0,n.getSelectedText)()}catch{return""}}async function Ae(t){let e=await n.Clipboard.readText(),s=await Je();if(t==="clipboard"){if(e)return e;if(s)return s}else{if(s)return s;if(e)return e}throw new F}var O=new n.Cache,Ke=()=>{let t=O.get("pinned");return t?JSON.parse(t):[]},Be=()=>{let t=O.get("recent");return t?JSON.parse(t):[]},Ve=t=>{O.set("pinned",JSON.stringify(t))},Ge=t=>{O.set("recent",JSON.stringify(t))};function ye(t){let e=(0,n.getPreferenceValues)(),s=e.source,a=e.action,o=e.hideHUD,i=t.launchContext?.case,[p,m]=(0,f.useState)(""),[d,h]=(0,f.useState)(),[u,P]=(0,f.useState)([]),[l,A]=(0,f.useState)([]);(0,f.useEffect)(()=>{if(i){(async()=>{try{let r=await Ae(s),C=X(r,i);a==="paste"?n.Clipboard.paste(C):n.Clipboard.copy(C),o||(0,n.showHUD)(`Converted to ${i}`)}catch(r){r instanceof F?(0,n.showToast)({style:n.Toast.Style.Failure,title:"No text available",message:"Please ensure that text is either selected or copied"}):(0,n.showToast)({style:n.Toast.Style.Failure,title:"Failed to convert text"})}(0,n.popToRoot)()})();return}P(Ke()),A(Be()),(0,n.getFrontmostApplication)().then(h)},[]),(0,f.useEffect)(()=>{Ve(u)},[u]),(0,f.useEffect)(()=>{Ge(l)},[l]),(0,f.useEffect)(()=>{t.fallbackText&&(0,n.clearSearchBar)()},[]);let k=async()=>{try{m(t.fallbackText||await Ae(s))}catch(r){r instanceof F&&(0,n.showToast)({style:n.Toast.Style.Failure,title:"Nothing to convert",message:"Please ensure that text is either selected or copied"})}};(0,f.useEffect)(()=>{i||k()},[]);let x=(0,f.useCallback)((r,C,_,L)=>{A([r,...l.filter(Te=>Te!==r)].slice(0,He+u.length)),o||(0,n.showHUD)(_),L==="paste"?n.Clipboard.paste(C):n.Clipboard.copy(C),e.popToRoot?(0,n.popToRoot)():(0,n.closeMainWindow)()},[l,u.length,o,e.popToRoot]),g=(0,f.useMemo)(()=>{let r=[...new Set([...u,...l,...Object.keys(R)])];return Object.fromEntries(r.filter(C=>R[C]).map(C=>[C,we(p,C)]))},[p,u,l]);if(i)return null;let T=r=>(0,c.jsx)(n.Action,{title:"Copy to Clipboard",icon:n.Icon.Clipboard,shortcut:n.Keyboard.Shortcut.Common.Copy,onAction:()=>x(r.case,r.modified,"Copied to Clipboard","copy")}),S=r=>d?(0,c.jsx)(n.Action,{title:`Paste in ${d.name}`,icon:{fileIcon:d.path},onAction:()=>x(r.case,r.modified,`Pasted in ${d.name}`,"paste")}):null,y=r=>{let C=encodeURIComponent(`{"case":"${r.case}"}`),_=`raycast://extensions/erics118/${n.environment.extensionName}/${n.environment.commandName}?context=${C}`;return(0,c.jsx)(n.List.Item,{id:r.case,title:r.case,accessories:[{text:r.modified}],detail:(0,c.jsx)(n.List.Item.Detail,{markdown:r.detail}),keywords:Se[r.case],actions:(0,c.jsxs)(n.ActionPanel,{children:[(0,c.jsxs)(n.ActionPanel.Section,{children:[a==="paste"&&(0,c.jsx)(S,{...r}),(0,c.jsx)(T,{...r}),a==="copy"&&(0,c.jsx)(S,{...r})]}),(0,c.jsxs)(n.ActionPanel.Section,{children:[r.pinned?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.Action,{title:"Remove Pinned Case",icon:n.Icon.PinDisabled,shortcut:n.Keyboard.Shortcut.Common.Remove,onAction:()=>{P(u.filter(L=>L!==r.case))}}),(0,c.jsx)(n.Action,{title:"Clear Pinned Cases",style:n.Action.Style.Destructive,icon:{source:n.Icon.XMarkCircle},shortcut:n.Keyboard.Shortcut.Common.RemoveAll,onAction:()=>{P([])}})]}):(0,c.jsx)(n.Action,{title:"Pin Case",icon:n.Icon.Pin,shortcut:n.Keyboard.Shortcut.Common.Pin,onAction:()=>{P([r.case,...u]),r.recent&&A(l.filter(L=>L!==r.case))}}),r.recent&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.Action,{title:"Remove Recent Case",icon:n.Icon.XMarkCircle,shortcut:n.Keyboard.Shortcut.Common.Remove,onAction:()=>{A(l.filter(L=>L!==r.case))}}),(0,c.jsx)(n.Action,{title:"Clear Recent Cases",icon:{source:n.Icon.XMarkCircle,tintColor:n.Color.Red},shortcut:n.Keyboard.Shortcut.Common.RemoveAll,onAction:()=>{A([])}})]}),(0,c.jsx)(n.Action.CreateQuicklink,{title:`Create Quicklink to Convert to ${r.case}`,quicklink:{name:`Convert to ${r.case}`,link:_}})]}),(0,c.jsx)(n.ActionPanel.Section,{children:(0,c.jsx)(n.Action,{title:"Refresh Content",icon:n.Icon.RotateAntiClockwise,shortcut:n.Keyboard.Shortcut.Common.Refresh,onAction:k})})]})})};return(0,c.jsxs)(n.List,{isShowingDetail:!0,isLoading:!u||!l,selectedItemId:l[0],children:[(0,c.jsx)(n.List.Section,{title:"Pinned",children:u?.filter(r=>g[r]).map(r=>{let C=g[r];return(0,c.jsx)(y,{case:r,modified:C.rawText,detail:C.markdown,pinned:!0},r)})}),(0,c.jsx)(n.List.Section,{title:"Recent",children:l.filter(r=>!u.includes(r)).map(r=>{let C=g[r];return(0,c.jsx)(y,{case:r,modified:C.rawText,detail:C.markdown,recent:!0},r)})}),(0,c.jsx)(n.List.Section,{title:"All Cases",children:Object.keys(R).filter(r=>e[r.replace(/ +/g,"")]&&!l.includes(r)&&!u.includes(r)).map(r=>{let C=g[r];return(0,c.jsx)(y,{case:r,modified:C.rawText,detail:C.markdown},r)})})]})}
